uint8_t bitmap_192x8_1[] =
{
  0xFF, 0xFF, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00,
  0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xC0, 0xFF, 0xFF
};

uint8_t bitmap_192x8_2[] =
{
  0xFF, 0xFF, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00,
  0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0xFF, 0xFF
};

void print_chek(
  String Chek_number, 
  String INN, 
  String fn, 
  String fd, 
  String fp, 
  String rn_kkt, 
  String zn_kkt, 
  int Product_position, 
  String products[], 
  float counts[], 
  float prices[], 
  float NDS[], 
  String Date_Time[], 
  float nalichka_zaplatili, 
  float digital_zaplatili, 
  String address, 
  String FIO, 
  String SNO, 
  String FIO_kassir, 
  String smena_number) //Date_Time day month year H M
{

  thermo_set_text_align(1);
  thermo_select_print_mode(8);
  print_rus_symbol("Кассовый чек N");
  MySerial.write(176);//№
  print_rus_symbol(" "+Chek_number);
  MySerial.println("");
  print_rus_symbol(FIO);
  MySerial.println("");
  print_rus_symbol(address);
  MySerial.println("");
  print_rus_symbol(Date_Time[0] + "-" + Date_Time[1] + "-" + Date_Time[2] + " " + Date_Time[3] + ":" + Date_Time[4]);
  MySerial.println("");
  thermo_select_print_mode(0);

  //print_rus_symbol("===============================");
  print_rus_symbol("-------------------------------");
  MySerial.println("");

  print_rus_symbol("КАССОВЫЙ ЧЕК/ПРИХОД");
  MySerial.println("");

  print_rus_symbol("-------------------------------");
  MySerial.println("");

  float summa = 0;
  for (int i = 0; i < Product_position; i++)
  {
    thermo_set_text_align(0);
    print_rus_symbol(products[i]);
    MySerial.println("");
    thermo_set_text_align(2);
    print_rus_symbol(String(counts[i], 2) + '*' + String(prices[i], 2) + " =" + String(counts[i]*prices[i], 2));
    MySerial.println("");
    summa += counts[i] * prices[i];

    thermo_set_text_align(0);
    String Nds = "Сумма НДС "+String(NDS[i],0)+"%";
    print_rus_symbol(Nds);
    String nds = "=" + String((NDS[i]*counts[i] * prices[i])/(100+NDS[i]), 0);
    int col_space_nds = 32-11-String(NDS[i],0).length()- nds.length();
    //Serial.println(Nds.length());
    //Serial.println(nds.length());
    //Serial.println(col_space_nds);
    if (col_space_nds >= 0)
    {
      for (int i = 0; i < col_space_nds; i++)
      {
        print_rus_symbol(" ");
      }
      print_rus_symbol(nds);
    }
    else
    {
      MySerial.println("");
      thermo_set_text_align(2);
      print_rus_symbol(nds);
    }
  MySerial.println("");
  }


  thermo_select_print_mode(32 + 16 + 8);

  thermo_set_text_align(0);
  print_rus_symbol("ИТОГ");//4*2 = 8
  String sum = "=" + String(summa, 2);
  int col_space = 12 - sum.length();
  if (col_space >= 0)
  {
    for (int i = 0; i < col_space; i++)
    {
      print_rus_symbol(" ");
    }
    print_rus_symbol(sum);
  }
  else
  {
    MySerial.println("");
    thermo_set_text_align(2);
    print_rus_symbol(sum);
  }
  MySerial.println("");




  String oplata1 = "=" + String(nalichka_zaplatili, 2);
  String oplata2 = "=" + String(digital_zaplatili, 2);
  int col_space_1;
  int col_space_2;
  col_space_1 = 23 - oplata1.length();
  col_space_2 = 20 - oplata2.length();

  thermo_select_print_mode(0);
  print_rus_symbol("ОПЛАТА");//zaplatili
  MySerial.println("");
  print_rus_symbol("Наличными");
  if (col_space_1 >= 0)
  {
    for (int i = 0; i < col_space_1; i++)
    {
      print_rus_symbol(" ");
    }
    print_rus_symbol(oplata1);
  }
  else
  {
    MySerial.println("");
    thermo_set_text_align(2);
    print_rus_symbol(oplata1);
  }
  MySerial.println("");


  thermo_set_text_align(0);
  print_rus_symbol("Электронными");
  if (col_space_2 >= 0)
  {
    for (int i = 0; i < col_space_2; i++)
    {
      print_rus_symbol(" ");
    }
    print_rus_symbol(oplata2);
  }
  else
  {
    MySerial.println("");
    thermo_set_text_align(2);
    print_rus_symbol(oplata2);
  }
  MySerial.println("");


  String Sdacha = "=" + String(nalichka_zaplatili+digital_zaplatili-summa, 2);
  int col_space_3;
  col_space_3 = 27-Sdacha.length();
  thermo_set_text_align(0);
  print_rus_symbol("Сдача");
  if (col_space_3 >= 0)
  {
    for (int i = 0; i < col_space_3; i++)
    {
      print_rus_symbol(" ");
    }
    print_rus_symbol(Sdacha);
  }
  else
  {
    MySerial.println("");
    thermo_set_text_align(2);
    print_rus_symbol(Sdacha);
  }
  MySerial.println("");

  
  int col_space_4 = 31-SNO.length();
  thermo_set_text_align(0);
  print_rus_symbol("СНО:");
  if (col_space_4 >= 0)
  {
    for (int i = 0; i < col_space_4; i++)
    {
      print_rus_symbol(" ");
    }
    print_rus_symbol(SNO);
  }
  else
  {
    MySerial.println("");
    thermo_set_text_align(2);
    print_rus_symbol(SNO);
  }
  MySerial.println("");
  MySerial.println("");
  
  thermo_set_text_align(0);
  print_rus_symbol(FIO_kassir);
  MySerial.println("");

  int col_space_smena = 24-smena_number.length();
  print_rus_symbol("Смена N");
  MySerial.write(176);
  if (col_space_smena >= 0)
  {
    for (int i = 0; i < col_space_smena; i++)
    {
      print_rus_symbol(" ");
    }
    print_rus_symbol(smena_number);
  }
  else
  {
    MySerial.println("");
    thermo_set_text_align(2);
    print_rus_symbol(smena_number);
  }
  MySerial.println("");
  MySerial.println("");


  
  thermo_set_text_align(0);
  int col_space_inn = 29-INN.length();
  print_rus_symbol("ИНН");
  if (col_space_inn >= 0)
  {
    for (int i = 0; i < col_space_inn; i++)
    {
      print_rus_symbol(" ");
    }
    print_rus_symbol(INN);
  }
  else
  {
    MySerial.println("");
    thermo_set_text_align(2);
    print_rus_symbol(INN);
  }
  MySerial.println("");

  
  thermo_set_text_align(0);
  print_rus_symbol("Сайт ФНС:           www.nalog.ru");
  MySerial.println("");


// Г
  thermo_set_text_align(0);
  Thermal_printer_Bitmap_print(bitmap_192x8_1, 192, sizeof(bitmap_192x8_1) / 192);
  MySerial.println("");

  //======================================  ZN KKT ================================================
  thermo_set_text_align(0);
  int col_space_fdata = 21-zn_kkt.length();
  print_rus_symbol("  ЗН ККТ:");
  if (col_space_fdata >= 0)
  {
    for (int i = 0; i < col_space_fdata; i++)
    {
      print_rus_symbol(" ");
    }
    print_rus_symbol(zn_kkt);
  }
  else
  {
    MySerial.println("");
    thermo_set_text_align(2);
    print_rus_symbol(zn_kkt);
  }
  MySerial.println("");

  //======================================  RN KKT ================================================
  thermo_set_text_align(0);
  col_space_fdata = 21-rn_kkt.length();
  print_rus_symbol("  РН ККТ:");
  if (col_space_fdata >= 0)
  {
    for (int i = 0; i < col_space_fdata; i++)
    {
      print_rus_symbol(" ");
    }
    print_rus_symbol(rn_kkt);
  }
  else
  {
    MySerial.println("");
    thermo_set_text_align(2);
    print_rus_symbol(rn_kkt);
  }
  MySerial.println("");
  
  //======================================  FN ================================================
  thermo_set_text_align(0);
  col_space_fdata = 25-fn.length();
  print_rus_symbol("  ФН:");
  if (col_space_fdata >= 0)
  {
    for (int i = 0; i < col_space_fdata; i++)
    {
      print_rus_symbol(" ");
    }
    print_rus_symbol(fn);
  }
  else
  {
    MySerial.println("");
    thermo_set_text_align(2);
    print_rus_symbol(fn);
  }
  MySerial.println("");
  
  //======================================  FD ================================================
  thermo_set_text_align(0);
  col_space_fdata = 25-fd.length();
  print_rus_symbol("  ФД:");
  if (col_space_fdata >= 0)
  {
    for (int i = 0; i < col_space_fdata; i++)
    {
      print_rus_symbol(" ");
    }
    print_rus_symbol(fd);
  }
  else
  {
    MySerial.println("");
    thermo_set_text_align(2);
    print_rus_symbol(fd);
  }
  MySerial.println("");

  //======================================  fp ================================================
  thermo_set_text_align(0);
  col_space_fdata = 25-fp.length();
  print_rus_symbol("  ФП:");
  if (col_space_fdata >= 0)
  {
    for (int i = 0; i < col_space_fdata; i++)
    {
      print_rus_symbol(" ");
    }
    print_rus_symbol(fp);
  }
  else
  {
    MySerial.println("");
    thermo_set_text_align(2);
    print_rus_symbol(fp);
  }
  MySerial.println("");
  
  thermo_set_text_align(0);
  Thermal_printer_Bitmap_print(bitmap_192x8_2, 192, sizeof(bitmap_192x8_2) / 192);
  MySerial.println("");
// L

  thermo_set_text_align(1);
  String str_msg = "t=";
  str_msg+=Date_Time[2];
  str_msg+=Date_Time[1];
  str_msg+=Date_Time[0];
  str_msg+="T";
  str_msg+=Date_Time[3];
  str_msg+=Date_Time[4];
  str_msg+="00&s=";
  str_msg+=String(summa,2);
  str_msg+="&fn=";
  str_msg+=fn;
  str_msg+="&i=";
  str_msg+=fd;
  str_msg+="&fp=";
  str_msg+=fp;
  str_msg+="&n=1";
  thermo_printer_QR_print(str_msg, 3, L);  
  MySerial.println("");
  print_rus_symbol("Спасибо за покупку");
  MySerial.println("");
  MySerial.println("");
  print_rus_symbol("_______________________________");
  MySerial.println("");
  MySerial.println("");

}
